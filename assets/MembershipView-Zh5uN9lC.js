import{_ as M,r as v,c as S,b as n,a as c,e as k,w as p,T as m,f as I,o as y,g as T,h as _,v as P,t as N}from"./index-4LJKb33_.js";var L="basil",A=function(t){return t===3?"v3":t},x="https://js.stripe.com",q="".concat(x,"/").concat(L,"/stripe.js"),J=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,B=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var F=function(t){return J.test(t)||B.test(t)},G=function(){for(var t=document.querySelectorAll('script[src^="'.concat(x,'"]')),r=0;r<t.length;r++){var s=t[r];if(F(s.src))return s}return null},j=function(t){var r="",s=document.createElement("script");s.src="".concat(q).concat(r);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(s),s},O=function(t,r){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"7.3.1",startTime:r})},f=null,g=null,E=null,D=function(t){return function(r){t(new Error("Failed to load Stripe.js",{cause:r}))}},W=function(t,r){return function(){window.Stripe?t(window.Stripe):r(new Error("Stripe.js not available"))}},X=function(t){return f!==null?f:(f=new Promise(function(r,s){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe){r(window.Stripe);return}try{var o=G();if(!(o&&t)){if(!o)o=j(t);else if(o&&E!==null&&g!==null){var a;o.removeEventListener("load",E),o.removeEventListener("error",g),(a=o.parentNode)===null||a===void 0||a.removeChild(o),o=j(t)}}E=W(r,s),g=D(s),o.addEventListener("load",E),o.addEventListener("error",g)}catch(l){s(l);return}}),f.catch(function(r){return f=null,Promise.reject(r)}))},K=function(t,r,s){if(t===null)return null;var o=r[0],a=o.match(/^pk_test/),l=A(t.version),d=L;a&&l!==d&&console.warn("Stripe.js@".concat(l," was loaded on the page, but @stripe/stripe-js@").concat("7.3.1"," expected Stripe.js@").concat(d,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var b=t.apply(void 0,r);return O(b,s),b},h,R=!1,V=function(){return h||(h=X(null).catch(function(t){return h=null,Promise.reject(t)}),h)};Promise.resolve().then(function(){return V()}).catch(function(i){R||console.warn(i)});var z=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];R=!0;var o=Date.now();return V().then(function(a){return K(a,r,o)})};const H={class:"membership"},Q={class:"membership-content"},Y=["disabled"],$=["disabled"],Z=["disabled"],ee=["disabled"],te={key:0,class:"loading-spinner"},ne={__name:"MembershipView",setup(i){const t=I(),r=v(""),s=v(""),o=v(""),a=v(!1),l=v(!1),d=()=>{l.value=!1},b=()=>{t.push("/contact")},U=async()=>{console.log("Sending",{name:r.value,email:s.value,phone:o.value}),a.value=!0;try{const w=await z("pk_test_51RXnmZ2LuuFdegO3Y0dk6gd65FMnwPV1DLKc1tRoC5JLs1GtodS6mCCzzsNfQgDYUxHcQOcXupKq5xTKvtmPl62V00UUfMxsSM"),e=await fetch("https://us-central1-afp-site-c1bd9.cloudfunctions.net/createCheckoutSession",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r.value,email:s.value,phone:o.value})});if(e.status===409){l.value=!0,a.value=!1;return}if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const u=await e.json(),{error:C}=await w.redirectToCheckout({sessionId:u.id});if(C)throw C}catch(w){console.error(w),alert("Something went wrong. Please try again."),a.value=!1}};return(w,e)=>(y(),S("section",H,[n("div",Q,[c(m,{name:"fade-slide",appear:""},{default:p(()=>e[4]||(e[4]=[n("h1",{class:"animated-item"},"Membership Benefits",-1)])),_:1,__:[4]}),c(m,{name:"fade-slide",appear:""},{default:p(()=>e[5]||(e[5]=[n("p",{class:"intro animated-item"}," Join the Association of Family Psychiatrists and become part of a vibrant community dedicated to advancing family mental health. ",-1)])),_:1,__:[5]}),c(m,{name:"fade-slide",appear:""},{default:p(()=>e[6]||(e[6]=[n("ul",{class:"benefits-list animated-item"},[n("li",null,"â€¢ Access to exclusive publications and resources"),n("li",null,"â€¢ Discounts on conferences, workshops, and events"),n("li",null,"â€¢ Networking opportunities with fellow professionals"),n("li",null,"â€¢ Subscription to our members-only newsletter"),n("li",null,"â€¢ Opportunities for professional development and leadership")],-1)])),_:1,__:[6]}),c(m,{name:"fade-slide",appear:""},{default:p(()=>e[7]||(e[7]=[n("h2",{class:"signup-heading animated-item"},"Join Now",-1)])),_:1,__:[7]}),c(m,{name:"fade-slide",appear:""},{default:p(()=>[a.value?k("",!0):(y(),S("form",{key:0,onSubmit:T(U,["prevent"]),class:"signup-form animated-item"},[_(n("input",{"onUpdate:modelValue":e[0]||(e[0]=u=>r.value=u),type:"text",placeholder:"Full Name",required:"",disabled:a.value},null,8,Y),[[P,r.value]]),_(n("input",{"onUpdate:modelValue":e[1]||(e[1]=u=>s.value=u),type:"email",placeholder:"Email Address",required:"",disabled:a.value},null,8,$),[[P,s.value]]),_(n("input",{"onUpdate:modelValue":e[2]||(e[2]=u=>o.value=u),type:"tel",placeholder:"Phone Number",required:"",disabled:a.value},null,8,Z),[[P,o.value]]),n("button",{class:"join-button",type:"submit",disabled:a.value},N(a.value?"Processingâ€¦":"Become a Member"),9,ee)],32))]),_:1}),a.value?(y(),S("div",te,e[8]||(e[8]=[n("p",null,"Redirecting to secure checkoutâ€¦",-1),n("span",{class:"spinner"},null,-1)]))):k("",!0)]),c(m,{name:"modal",appear:""},{default:p(()=>[l.value?(y(),S("div",{key:0,class:"modal-overlay",onClick:d},[n("div",{class:"modal-content",onClick:e[3]||(e[3]=T(()=>{},["stop"]))},[n("div",{class:"modal-header"},[e[10]||(e[10]=n("h3",null,"Welcome Back!",-1)),n("button",{class:"close-button",onClick:d,"aria-label":"Close modal"},e[9]||(e[9]=[n("span",null,"Ã—",-1)]))]),n("div",{class:"modal-body"},[e[11]||(e[11]=n("div",{class:"icon-container"},[n("div",{class:"welcome-icon"},"ðŸ‘‹")],-1)),e[12]||(e[12]=n("p",{class:"modal-message"}," It looks like you're already a member of the Association of Family Psychiatrists! ",-1)),e[13]||(e[13]=n("p",{class:"modal-submessage"}," If you need to update your membership or have any questions, please contact us directly. ",-1)),n("div",{class:"modal-actions"},[n("button",{class:"modal-button primary",onClick:d},"Got it, thanks!"),n("button",{class:"modal-button secondary",onClick:b},"Contact Us")])])])])):k("",!0)]),_:1})]))}},oe=M(ne,[["__scopeId","data-v-08371f9b"]]);export{oe as default};
