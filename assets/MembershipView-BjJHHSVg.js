import{_ as x,i as o,j as D,k as V,g as A,a as i,d as s,b as r,h as c,w as d,T as u,l as I,o as p,m as O,p as k,v as P}from"./index-DSTwx0lE.js";const j={class:"membership"},B={class:"membership-content"},E=["disabled"],J=["disabled"],U=["disabled"],$={key:0,class:"form-note"},W={key:0,class:"loading-spinner"},q=["innerHTML"],F={__name:"MembershipView",setup(L){const C=A(),m=o(""),f=o(""),y=o(""),l=o(!1),h=o(!1),T=o(!1),v=o(""),w=o(""),g=()=>{h.value=!1},_=()=>{C.push("/contact")},M=t=>{t.preventDefault()},b=(t,e="info")=>{v.value=t,w.value=e,setTimeout(()=>{v.value="",w.value=""},1e4)};D(()=>{const t=document.createElement("script");t.src="https://www.paypal.com/sdk/js?client-id=AaaPWSEs6Fn13kOO5p9Kx7n9IQ8JmEoBWTATas189YUjlY9fspQT6WdQO7ew0vy9mtdfV2wcX-LnW0ib&currency=USD&components=buttons",t.onload=async()=>{T.value=!0,await V(),S()},document.head.appendChild(t)});const S=()=>{window.paypal&&window.paypal.Buttons({style:{shape:"rect",layout:"vertical",color:"gold",label:"paypal"},message:{amount:50},async createOrder(){var t;if(!m.value||!f.value||!y.value){b("Please fill in all required fields","error");return}try{const e=await fetch("https://us-central1-afp-site-c1bd9.cloudfunctions.net/createPayPalOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m.value,email:f.value,phone:y.value})}),a=await e.json();if(e.status===409){h.value=!0;return}if(a.id)return a.id;const n=(t=a==null?void 0:a.details)==null?void 0:t[0],N=n?`${n.issue} ${n.description} (${a.debug_id})`:JSON.stringify(a);throw new Error(N)}catch(e){console.error(e),b(`Could not initiate PayPal Checkout...<br><br>${e}`,"error")}},async onApprove(t,e){l.value=!0,console.log("Passing approved order ID to backend",t.orderID);try{const n=await(await fetch("https://us-central1-afp-site-c1bd9.cloudfunctions.net/capturePayPalOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderID:t.orderID})})).json();console.log("Order data",JSON.stringify(n)),b(`Order ${n.status}: ${n.id}<br>
            <br>Welcome to AFP! You will receive a confirmation email shortly.`,"success"),setTimeout(()=>{C.push("/confirmation")},3e3)}catch(a){console.error(a),b(`Sorry, your transaction could not be processed...<br><br>${a}`,"error")}finally{l.value=!1}}}).render("#paypal-button-container")};return(t,e)=>(p(),i("section",j,[s("div",B,[r(u,{name:"fade-slide",appear:""},{default:d(()=>e[4]||(e[4]=[s("h1",{class:"animated-item"},"Membership Benefits",-1)])),_:1,__:[4]}),r(u,{name:"fade-slide",appear:""},{default:d(()=>e[5]||(e[5]=[s("p",{class:"intro animated-item"}," Join the Association of Family Psychiatrists and become part of a vibrant community dedicated to advancing family mental health. ",-1)])),_:1,__:[5]}),r(u,{name:"fade-slide",appear:""},{default:d(()=>e[6]||(e[6]=[s("ul",{class:"benefits-list animated-item"},[s("li",null,"â€¢ Access to exclusive publications and resources"),s("li",null,"â€¢ Discounts on conferences, workshops, and events"),s("li",null,"â€¢ Networking opportunities with fellow professionals"),s("li",null,"â€¢ Subscription to our members-only newsletter"),s("li",null,"â€¢ Opportunities for professional development and leadership")],-1)])),_:1,__:[6]}),r(u,{name:"fade-slide",appear:""},{default:d(()=>e[7]||(e[7]=[s("h2",{class:"signup-heading animated-item"},"Join Now",-1)])),_:1,__:[7]}),r(u,{name:"fade-slide",appear:""},{default:d(()=>[l.value?c("",!0):(p(),i("form",{key:0,onSubmit:O(M,["prevent"]),class:"signup-form animated-item"},[k(s("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>m.value=a),type:"text",placeholder:"Full Name",required:"",disabled:l.value},null,8,E),[[P,m.value]]),k(s("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>f.value=a),type:"email",placeholder:"Email Address",required:"",disabled:l.value},null,8,J),[[P,f.value]]),k(s("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>y.value=a),type:"tel",placeholder:"Phone Number",required:"",disabled:l.value},null,8,U),[[P,y.value]]),e[8]||(e[8]=s("div",{id:"paypal-button-container"},null,-1)),T.value?(p(),i("p",$,"Complete your information above and click the PayPal button to proceed")):c("",!0)],32))]),_:1}),l.value?(p(),i("div",W,e[9]||(e[9]=[s("p",null,"Processing your paymentâ€¦",-1),s("span",{class:"spinner"},null,-1)]))):c("",!0),v.value?(p(),i("div",{key:1,class:I(["result-message",w.value])},[s("p",{innerHTML:v.value},null,8,q)],2)):c("",!0)]),r(u,{name:"modal",appear:""},{default:d(()=>[h.value?(p(),i("div",{key:0,class:"modal-overlay",onClick:g},[s("div",{class:"modal-content",onClick:e[3]||(e[3]=O(()=>{},["stop"]))},[s("div",{class:"modal-header"},[e[11]||(e[11]=s("h3",null,"Welcome Back!",-1)),s("button",{class:"close-button",onClick:g,"aria-label":"Close modal"},e[10]||(e[10]=[s("span",null,"Ã—",-1)]))]),s("div",{class:"modal-body"},[e[12]||(e[12]=s("div",{class:"icon-container"},[s("div",{class:"welcome-icon"},"ðŸ‘‹")],-1)),e[13]||(e[13]=s("p",{class:"modal-message"}," It looks like you're already a member of the Association of Family Psychiatrists! ",-1)),e[14]||(e[14]=s("p",{class:"modal-submessage"}," If you need to update your membership or have any questions, please contact us directly. ",-1)),s("div",{class:"modal-actions"},[s("button",{class:"modal-button primary",onClick:g},"Got it, thanks!"),s("button",{class:"modal-button secondary",onClick:_},"Contact Us")])])])])):c("",!0)]),_:1})]))}},Y=x(F,[["__scopeId","data-v-d023873a"]]);export{Y as default};
