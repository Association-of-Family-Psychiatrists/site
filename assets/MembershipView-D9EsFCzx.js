import{_ as O,l as o,p as D,q as J,h as V,a as i,d as a,e as r,i as c,w as d,T as u,s as q,o as p,v as T,x as g,y as P}from"./index-B_uhQ9O8.js";const I={class:"membership"},A={class:"membership-content"},B=["disabled"],E=["disabled"],j=["disabled"],L={key:0,class:"form-note"},U={key:0,class:"loading-spinner"},F=["innerHTML"],$={__name:"MembershipView",setup(z){const _=V(),m=o(""),f=o(""),y=o(""),l=o(!1),b=o(!1),C=o(!1),v=o(""),h=o(""),w=()=>{b.value=!1},M=()=>{_.push("/contact")},S=t=>{t.preventDefault()},k=(t,e="info")=>{v.value=t,h.value=e,setTimeout(()=>{v.value="",h.value=""},1e4)};D(()=>{const t=document.createElement("script");t.src="https://www.paypal.com/sdk/js?client-id=ATudL1zTvsJmaJ-kS6hmdf7L6FLM3mfdFMnkle5EGbA2Jfq12VfNagnkk_W8kDXr7J_jekw_dTEBx3RS&currency=USD&components=buttons",t.onload=async()=>{C.value=!0,await J(),N()},document.head.appendChild(t)});const N=()=>{window.paypal&&window.paypal.Buttons({style:{shape:"rect",layout:"vertical",color:"gold",label:"paypal"},message:{amount:50},async createOrder(){var t;if(!m.value||!f.value||!y.value){k("Please fill in all required fields","error");return}try{const e=await fetch("https://us-central1-afp-site-c1bd9.cloudfunctions.net/createPayPalOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m.value,email:f.value,phone:y.value})}),s=await e.json();if(e.status===409){b.value=!0;return}if(s.id)return s.id;const n=(t=s==null?void 0:s.details)==null?void 0:t[0],x=n?`${n.issue} ${n.description} (${s.debug_id})`:JSON.stringify(s);throw new Error(x)}catch(e){console.error(e),k(`Could not initiate PayPal Checkout...<br><br>${e}`,"error")}},async onApprove(t,e){l.value=!0,console.log("Passing approved order ID to backend",t.orderID);try{const n=await(await fetch("https://us-central1-afp-site-c1bd9.cloudfunctions.net/capturePayPalOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderID:t.orderID})})).json();console.log("Order data",JSON.stringify(n)),setTimeout(()=>{_.push({path:"/confirmation",query:{orderId:n.id}})},3e3)}catch(s){console.error(s),k(`Sorry, your transaction could not be processed...<br><br>${s}`,"error")}finally{l.value=!1}}}).render("#paypal-button-container")};return(t,e)=>(p(),i("section",I,[a("div",A,[r(u,{name:"fade-slide",appear:""},{default:d(()=>e[4]||(e[4]=[a("h1",{class:"animated-item"},"Membership Benefits",-1)])),_:1,__:[4]}),r(u,{name:"fade-slide",appear:""},{default:d(()=>e[5]||(e[5]=[a("p",{class:"intro animated-item"}," Join the Association of Family Psychiatrists and become part of a vibrant community dedicated to advancing family mental health. ",-1)])),_:1,__:[5]}),r(u,{name:"fade-slide",appear:""},{default:d(()=>e[6]||(e[6]=[a("ul",{class:"benefits-list animated-item"},[a("li",null,"â€¢ Access to exclusive publications and resources"),a("li",null,"â€¢ Discounts on conferences, workshops, and events"),a("li",null,"â€¢ Networking opportunities with fellow professionals"),a("li",null,"â€¢ Subscription to our members-only newsletter"),a("li",null,"â€¢ Opportunities for professional development and leadership")],-1)])),_:1,__:[6]}),r(u,{name:"fade-slide",appear:""},{default:d(()=>e[7]||(e[7]=[a("h2",{class:"signup-heading animated-item"},"Join Now",-1)])),_:1,__:[7]}),r(u,{name:"fade-slide",appear:""},{default:d(()=>[l.value?c("",!0):(p(),i("form",{key:0,onSubmit:T(S,["prevent"]),class:"signup-form animated-item"},[g(a("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s),type:"text",placeholder:"Full Name",required:"",disabled:l.value},null,8,B),[[P,m.value]]),g(a("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>f.value=s),type:"email",placeholder:"Email Address",required:"",disabled:l.value},null,8,E),[[P,f.value]]),g(a("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>y.value=s),type:"tel",placeholder:"Phone Number",required:"",disabled:l.value},null,8,j),[[P,y.value]]),e[8]||(e[8]=a("div",{id:"paypal-button-container"},null,-1)),C.value?(p(),i("p",L," Complete your information above and click the PayPal button to proceed ")):c("",!0)],32))]),_:1}),l.value?(p(),i("div",U,e[9]||(e[9]=[a("p",null,"Processing your paymentâ€¦",-1),a("span",{class:"spinner"},null,-1)]))):c("",!0),v.value?(p(),i("div",{key:1,class:q(["result-message",h.value])},[a("p",{innerHTML:v.value},null,8,F)],2)):c("",!0)]),r(u,{name:"modal",appear:""},{default:d(()=>[b.value?(p(),i("div",{key:0,class:"modal-overlay",onClick:w},[a("div",{class:"modal-content",onClick:e[3]||(e[3]=T(()=>{},["stop"]))},[a("div",{class:"modal-header"},[e[11]||(e[11]=a("h3",null,"Welcome Back!",-1)),a("button",{class:"close-button",onClick:w,"aria-label":"Close modal"},e[10]||(e[10]=[a("span",null,"Ã—",-1)]))]),a("div",{class:"modal-body"},[e[12]||(e[12]=a("div",{class:"icon-container"},[a("div",{class:"welcome-icon"},"ðŸ‘‹")],-1)),e[13]||(e[13]=a("p",{class:"modal-message"}," It looks like you're already a member of the Association of Family Psychiatrists! ",-1)),e[14]||(e[14]=a("p",{class:"modal-submessage"}," If you need to update your membership or have any questions, please contact us directly. ",-1)),a("div",{class:"modal-actions"},[a("button",{class:"modal-button primary",onClick:w},"Got it, thanks!"),a("button",{class:"modal-button secondary",onClick:M},"Contact Us")])])])])):c("",!0)]),_:1})]))}},G=O($,[["__scopeId","data-v-a9631c44"]]);export{G as default};
