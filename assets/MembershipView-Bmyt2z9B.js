import{_ as N,l as o,p as D,q as I,h as V,a as i,d as a,e as r,i as c,w as d,T as u,s as q,o as p,v as O,x as k,y as P}from"./index-C7OQCbCK.js";const A={class:"membership"},B={class:"membership-content"},E=["disabled"],J=["disabled"],U=["disabled"],j={key:0,class:"form-note"},W={key:0,class:"loading-spinner"},$=["innerHTML"],F={__name:"MembershipView",setup(L){const C=V(),m=o(""),y=o(""),f=o(""),n=o(!1),b=o(!1),T=o(!1),v=o(""),h=o(""),w=()=>{b.value=!1},_=()=>{C.push("/contact")},M=t=>{t.preventDefault()},g=(t,e="info")=>{v.value=t,h.value=e,setTimeout(()=>{v.value="",h.value=""},1e4)};D(()=>{const t=document.createElement("script");t.src="https://www.paypal.com/sdk/js?client-id=AaaPWSEs6Fn13kOO5p9Kx7n9IQ8JmEoBWTATas189YUjlY9fspQT6WdQO7ew0vy9mtdfV2wcX-LnW0ib&currency=USD&components=buttons",t.onload=async()=>{T.value=!0,await I(),S()},document.head.appendChild(t)});const S=()=>{window.paypal&&window.paypal.Buttons({style:{shape:"rect",layout:"vertical",color:"gold",label:"paypal"},message:{amount:50},async createOrder(){var t;if(!m.value||!y.value||!f.value){g("Please fill in all required fields","error");return}try{const e=await fetch("https://us-central1-afp-site-c1bd9.cloudfunctions.net/createPayPalOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m.value,email:y.value,phone:f.value})}),s=await e.json();if(e.status===409){b.value=!0;return}if(s.id)return s.id;const l=(t=s==null?void 0:s.details)==null?void 0:t[0],x=l?`${l.issue} ${l.description} (${s.debug_id})`:JSON.stringify(s);throw new Error(x)}catch(e){console.error(e),g(`Could not initiate PayPal Checkout...<br><br>${e}`,"error")}},async onApprove(t,e){n.value=!0,console.log("Passing approved order ID to backend",t.orderID);try{const l=await(await fetch("https://us-central1-afp-site-c1bd9.cloudfunctions.net/capturePayPalOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderID:t.orderID})})).json();console.log("Order data",JSON.stringify(l)),setTimeout(()=>{C.push({path:"/confirmation",query:{orderId:l.id}})},3e3)}catch(s){console.error(s),g(`Sorry, your transaction could not be processed...<br><br>${s}`,"error")}finally{n.value=!1}}}).render("#paypal-button-container")};return(t,e)=>(p(),i("section",A,[a("div",B,[r(u,{name:"fade-slide",appear:""},{default:d(()=>e[4]||(e[4]=[a("h1",{class:"animated-item"},"Membership Benefits",-1)])),_:1,__:[4]}),r(u,{name:"fade-slide",appear:""},{default:d(()=>e[5]||(e[5]=[a("p",{class:"intro animated-item"}," Join the Association of Family Psychiatrists and become part of a vibrant community dedicated to advancing family mental health. ",-1)])),_:1,__:[5]}),r(u,{name:"fade-slide",appear:""},{default:d(()=>e[6]||(e[6]=[a("ul",{class:"benefits-list animated-item"},[a("li",null,"â€¢ Access to exclusive publications and resources"),a("li",null,"â€¢ Discounts on conferences, workshops, and events"),a("li",null,"â€¢ Networking opportunities with fellow professionals"),a("li",null,"â€¢ Subscription to our members-only newsletter"),a("li",null,"â€¢ Opportunities for professional development and leadership")],-1)])),_:1,__:[6]}),r(u,{name:"fade-slide",appear:""},{default:d(()=>e[7]||(e[7]=[a("h2",{class:"signup-heading animated-item"},"Join Now",-1)])),_:1,__:[7]}),r(u,{name:"fade-slide",appear:""},{default:d(()=>[n.value?c("",!0):(p(),i("form",{key:0,onSubmit:O(M,["prevent"]),class:"signup-form animated-item"},[k(a("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s),type:"text",placeholder:"Full Name",required:"",disabled:n.value},null,8,E),[[P,m.value]]),k(a("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>y.value=s),type:"email",placeholder:"Email Address",required:"",disabled:n.value},null,8,J),[[P,y.value]]),k(a("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>f.value=s),type:"tel",placeholder:"Phone Number",required:"",disabled:n.value},null,8,U),[[P,f.value]]),e[8]||(e[8]=a("div",{id:"paypal-button-container"},null,-1)),T.value?(p(),i("p",j," Complete your information above and click the PayPal button to proceed ")):c("",!0)],32))]),_:1}),n.value?(p(),i("div",W,e[9]||(e[9]=[a("p",null,"Processing your paymentâ€¦",-1),a("span",{class:"spinner"},null,-1)]))):c("",!0),v.value?(p(),i("div",{key:1,class:q(["result-message",h.value])},[a("p",{innerHTML:v.value},null,8,$)],2)):c("",!0)]),r(u,{name:"modal",appear:""},{default:d(()=>[b.value?(p(),i("div",{key:0,class:"modal-overlay",onClick:w},[a("div",{class:"modal-content",onClick:e[3]||(e[3]=O(()=>{},["stop"]))},[a("div",{class:"modal-header"},[e[11]||(e[11]=a("h3",null,"Welcome Back!",-1)),a("button",{class:"close-button",onClick:w,"aria-label":"Close modal"},e[10]||(e[10]=[a("span",null,"Ã—",-1)]))]),a("div",{class:"modal-body"},[e[12]||(e[12]=a("div",{class:"icon-container"},[a("div",{class:"welcome-icon"},"ðŸ‘‹")],-1)),e[13]||(e[13]=a("p",{class:"modal-message"}," It looks like you're already a member of the Association of Family Psychiatrists! ",-1)),e[14]||(e[14]=a("p",{class:"modal-submessage"}," If you need to update your membership or have any questions, please contact us directly. ",-1)),a("div",{class:"modal-actions"},[a("button",{class:"modal-button primary",onClick:w},"Got it, thanks!"),a("button",{class:"modal-button secondary",onClick:_},"Contact Us")])])])])):c("",!0)]),_:1})]))}},z=N(F,[["__scopeId","data-v-725e7ca0"]]);export{z as default};
