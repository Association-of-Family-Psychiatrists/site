import{_ as R,r as f,c as w,b as a,a as d,e as E,w as c,T as p,o as b,f as V,g,v as _,t as C}from"./index-DD-evOpR.js";var L="basil",U=function(e){return e===3?"v3":e},P="https://js.stripe.com",k="".concat(P,"/").concat(L,"/stripe.js"),N=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,I=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var M=function(e){return N.test(e)||I.test(e)},A=function(){for(var e=document.querySelectorAll('script[src^="'.concat(P,'"]')),t=0;t<e.length;t++){var r=e[t];if(M(r.src))return r}return null},j=function(e){var t="",r=document.createElement("script");r.src="".concat(k).concat(t);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(r),r},J=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.3.1",startTime:t})},m=null,h=null,S=null,q=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},O=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},B=function(e){return m!==null?m:(m=new Promise(function(t,r){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var n=A();if(!(n&&e)){if(!n)n=j(e);else if(n&&S!==null&&h!==null){var l;n.removeEventListener("load",S),n.removeEventListener("error",h),(l=n.parentNode)===null||l===void 0||l.removeChild(n),n=j(e)}}S=O(t,r),h=q(r),n.addEventListener("load",S),n.addEventListener("error",h)}catch(u){r(u);return}}),m.catch(function(t){return m=null,Promise.reject(t)}))},D=function(e,t,r){if(e===null)return null;var n=t[0],l=n.match(/^pk_test/),u=U(e.version),i=L;l&&u!==i&&console.warn("Stripe.js@".concat(u," was loaded on the page, but @stripe/stripe-js@").concat("7.3.1"," expected Stripe.js@").concat(i,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var s=e.apply(void 0,t);return J(s,r),s},v,T=!1,x=function(){return v||(v=B(null).catch(function(e){return v=null,Promise.reject(e)}),v)};Promise.resolve().then(function(){return x()}).catch(function(o){T||console.warn(o)});var F=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];T=!0;var n=Date.now();return x().then(function(l){return D(l,t,n)})};const G={class:"membership"},X={class:"membership-content"},K=["disabled"],W=["disabled"],z=["disabled"],Q=["disabled"],Y={key:0,class:"loading-spinner"},H={__name:"MembershipView",setup(o){const e=f(""),t=f(""),r=f(""),n=f(!1),l=async()=>{console.log("Sending",{name:e.value,email:t.value,phone:r.value}),n.value=!0;try{const u=await F("pk_test_51RXnmZ2LuuFdegO3Y0dk6gd65FMnwPV1DLKc1tRoC5JLs1GtodS6mCCzzsNfQgDYUxHcQOcXupKq5xTKvtmPl62V00UUfMxsSM"),s=await(await fetch("https://us-central1-afp-site-c1bd9.cloudfunctions.net/createCheckoutSession",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.value,email:t.value,phone:r.value})})).json(),{error:y}=await u.redirectToCheckout({sessionId:s.id});if(y)throw y}catch(u){console.error(u),alert("Something went wrong. Please try again."),n.value=!1}};return(u,i)=>(b(),w("section",G,[a("div",X,[d(p,{name:"fade-slide",appear:""},{default:c(()=>i[3]||(i[3]=[a("h1",{class:"animated-item"},"Membership Benefits",-1)])),_:1,__:[3]}),d(p,{name:"fade-slide",appear:""},{default:c(()=>i[4]||(i[4]=[a("p",{class:"intro animated-item"}," Join the Association of Family Psychiatrists and become part of a vibrant community dedicated to advancing family mental health. ",-1)])),_:1,__:[4]}),d(p,{name:"fade-slide",appear:""},{default:c(()=>i[5]||(i[5]=[a("ul",{class:"benefits-list animated-item"},[a("li",null,"• Access to exclusive publications and resources"),a("li",null,"• Discounts on conferences, workshops, and events"),a("li",null,"• Networking opportunities with fellow professionals"),a("li",null,"• Subscription to our members-only newsletter"),a("li",null,"• Opportunities for professional development and leadership")],-1)])),_:1,__:[5]}),d(p,{name:"fade-slide",appear:""},{default:c(()=>i[6]||(i[6]=[a("h2",{class:"signup-heading animated-item"},"Join Now",-1)])),_:1,__:[6]}),d(p,{name:"fade-slide",appear:""},{default:c(()=>[n.value?E("",!0):(b(),w("form",{key:0,onSubmit:V(l,["prevent"]),class:"signup-form animated-item"},[g(a("input",{"onUpdate:modelValue":i[0]||(i[0]=s=>e.value=s),type:"text",placeholder:"Full Name",required:"",disabled:n.value},null,8,K),[[_,e.value]]),g(a("input",{"onUpdate:modelValue":i[1]||(i[1]=s=>t.value=s),type:"email",placeholder:"Email Address",required:"",disabled:n.value},null,8,W),[[_,t.value]]),g(a("input",{"onUpdate:modelValue":i[2]||(i[2]=s=>r.value=s),type:"tel",placeholder:"Phone Number",required:"",disabled:n.value},null,8,z),[[_,r.value]]),a("button",{class:"join-button",type:"submit",disabled:n.value},C(n.value?"Processing…":"Become a Member"),9,Q)],32))]),_:1}),n.value?(b(),w("div",Y,i[7]||(i[7]=[a("p",null,"Redirecting to secure checkout…",-1),a("span",{class:"spinner"},null,-1)]))):E("",!0)])]))}},$=R(H,[["__scopeId","data-v-923484f5"]]);export{$ as default};
